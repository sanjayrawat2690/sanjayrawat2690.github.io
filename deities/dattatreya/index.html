<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lord Dattatreya Aarti - Aarti Sangrah</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="autocomplete.css">
</head>
<body>
    <header class="main-header">
        <div class="header-container">
            <!-- Logo (Om symbol) -->
            <a href="/" class="logo-link">
                <div class="om-logo">ॐ</div>
            </a>
            
            <!-- Site title -->
            <div class="site-title">
                <h1>आरती संग्रह</h1>
                <h2>Aarti Sangrah</h2>
            </div>
            
            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" class="search-input" id="search-input" placeholder="Search for deities or aartis...">
                <button id="search-button" class="search-button">
                    <i class="fas fa-search"></i>
                </button>
            </div>
            
            <!-- Navigation menu -->
            <nav class="main-nav">
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="#about">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container deity-page">
        <header class="deity-header">
            <h1 id="deity-name">Deity Name</h1>
            <div class="deity-page-actions">
                <a href="/" class="back-button">← Back to All Deities</a>
            </div>
        </header>
        
        <main>
            <!-- Search Results Section -->
            <section id="main-search-results" style="display: none;">
                <h2 class="section-title">Search Results</h2>
                <p id="search-info"></p>
                <button id="clear-search-btn" class="clear-search-btn" style="display: none;">Clear Search</button>
                <div id="search-results-grid" class="deity-grid">
                    <!-- Search results will be populated here -->
                </div>
            </section>
            
            <div class="deity-detail">
                <div id="deity-image" class="deity-image ghibli-style"></div>
                
                <!-- Aarti Cards Section -->
                <div class="aarti-cards-container">
                    <h3>Select an Aarti</h3>
                    <div id="aarti-cards" class="aarti-cards">
                        <!-- Aarti cards will be populated here -->
                    </div>
                </div>
                
                <div class="aarti-container">
                    <div class="aarti-header">
                        <h2 id="aarti-title">आरती</h2>
                        <div class="language-toggle">
                            <button id="hindi-btn" class="active">हिंदी</button>
                            <button id="english-btn">English</button>
                        </div>
                    </div>
                    <div class="aarti-content" id="aarti-lyrics">
                        <!-- Aarti lyrics will be populated here via JavaScript -->
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <footer class="main-footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Aarti Sangrah</h3>
                <p>A digital collection of traditional Hindu devotional hymns</p>
            </div>
            
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Resources</h3>
                <ul>
                    <li><a href="https://en.wikipedia.org/wiki/Aarti" target="_blank">About Aarti</a></li>
                    <li><a href="#">Terms of Use</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2023 Aarti Sangrah. Created with devotion and love.</p>
            <p><a href="admin.html" class="admin-link">Manage Images</a></p>
        </div>
    </footer>
    
    
    <script>
        // Single deity data for dattatreya
        const currentDeity = {"id":"dattatreya","name":"Lord Dattatreya","image":"images/dattatreya.jpg","aarti":"जय दत्तात्रेय प्रभु, त्रिदेव अवतारी।\nब्रह्मा विष्णु महेश का, स्वरूप है तुम्हारा॥\nजय दत्तात्रेय प्रभु॥"};
        document.addEventListener('DOMContentLoaded', () => {
            // Get aarti ID from URL query parameter if any
            const urlParams = new URLSearchParams(window.location.search);
            const aartiId = urlParams.get('aarti');
            
            // Update page title
            document.title = `Lord Dattatreya Aarti - Aarti Sangrah`;
            
            // Update content
            document.getElementById('deity-name').textContent = 'Lord Dattatreya';
            
            // Add deity image
            const deityImageContainer = document.getElementById('deity-image');
            if (deityImageContainer) {
                deityImageContainer.style.backgroundImage = `url('../images/dattatreya.jpg')`;
            }
            
            // Current language state (default: Hindi)
            let currentLanguage = 'hindi';
            
            // Current selected aarti
            let currentAarti = null;
            
            // Handle both old format (single aarti) and new format (multiple aartis)
            let aartis = currentDeity.aartis;
            if (!aartis) {
                // Convert old format to new format on the fly
                aartis = [{
                    id: `dattatreya-1`,
                    title: "आरती",
                    hindi: currentDeity.aarti || "Aarti text unavailable",
                    english: currentDeity.aartiEnglish || "English translation not available"
                }];
            }
            
            // Populate aarti cards
            const aartiCardsContainer = document.getElementById('aarti-cards');
            
            aartis.forEach(aarti => {
                const aartiCard = document.createElement('div');
                aartiCard.className = 'aarti-card';
                aartiCard.dataset.aartiId = aarti.id;
                
                const title = document.createElement('h4');
                title.textContent = aarti.title;
                
                const preview = document.createElement('p');
                // Show just the first line of the aarti for preview
                const previewText = aarti.hindi.split('\n')[0];
                preview.textContent = previewText;
                
                aartiCard.appendChild(title);
                aartiCard.appendChild(preview);
                
                aartiCard.addEventListener('click', () => {
                    // Update URL with the selected aarti ID without reloading the page
                    const newUrl = new URL(window.location);
                    newUrl.searchParams.set('aarti', aarti.id);
                    window.history.pushState({}, '', newUrl);
                    
                    selectAarti(aarti.id);
                });
                
                aartiCardsContainer.appendChild(aartiCard);
            });
            
            // If aartiId is not specified or not found, use the first aarti
            let initialAartiId = aartiId;
            if (!initialAartiId || !aartis.find(a => a.id === initialAartiId)) {
                initialAartiId = aartis[0].id;
            }
            
            // Select the initial aarti
            selectAarti(initialAartiId);
            
            // Set up language toggle buttons
            const hindiBtn = document.getElementById('hindi-btn');
            const englishBtn = document.getElementById('english-btn');
            
            hindiBtn.addEventListener('click', () => {
                if (currentLanguage !== 'hindi') {
                    currentLanguage = 'hindi';
                    updateButtonStates();
                    updateAartiText();
                }
            });
            
            englishBtn.addEventListener('click', () => {
                if (currentLanguage !== 'english') {
                    currentLanguage = 'english';
                    updateButtonStates();
                    updateAartiText();
                }
            });
            
            // Function to update button active states
            function updateButtonStates() {
                hindiBtn.classList.toggle('active', currentLanguage === 'hindi');
                englishBtn.classList.toggle('active', currentLanguage === 'english');
            }
            
            // Function to select an aarti
            function selectAarti(id) {
                // Find the selected aarti
                currentAarti = aartis.find(a => a.id === id);
                
                if (!currentAarti) {
                    return;
                }
                
                // Update active card
                const aartiCards = document.querySelectorAll('.aarti-card');
                aartiCards.forEach(card => {
                    card.classList.toggle('active', card.dataset.aartiId === id);
                });
                
                // Update aarti title
                document.getElementById('aarti-title').textContent = currentAarti.title;
                
                // Update the aarti text
                updateAartiText();
            }
            
            // Function to update aarti text based on selected language
            function updateAartiText() {
                if (!currentAarti) {
                    return;
                }
                
                const aartiLyrics = document.getElementById('aarti-lyrics');
                
                if (currentLanguage === 'hindi') {
                    aartiLyrics.textContent = currentAarti.hindi;
                    aartiLyrics.style.fontFamily = "'Arial', sans-serif";
                } else {
                    // Show English translation
                    aartiLyrics.textContent = currentAarti.english || "English translation not available yet.";
                    aartiLyrics.style.fontFamily = "'Arial', sans-serif";
                }
            }
        });
    </script>
    <script src="search.js"></script>
</body>
</html> 